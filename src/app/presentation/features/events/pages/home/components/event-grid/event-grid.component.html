<section class="max-w-6xl mx-auto px-4">
  <article
    class="relative rounded-2xl border border-white/10 bg-white/5 backdrop-blur-xl shadow-2xl ring-1 ring-white/10 overflow-hidden"
  >
    <!-- blobs suaves -->
    <div
      class="pointer-events-none absolute -top-24 -left-24 h-64 w-64 rounded-full bg-pink-500/20 blur-3xl"
    ></div>
    <div
      class="pointer-events-none absolute -bottom-24 -right-24 h-64 w-64 rounded-full bg-fuchsia-500/20 blur-3xl"
    ></div>

    <div class="relative p-5 md:p-6">
      <!-- Título + CTA -->
      <div class="flex items-center justify-between gap-3">
        <div>
          <h2 class="text-lg md:text-xl font-extrabold text-white">
            Gestiona tus eventos
          </h2>
          <p class="text-sm text-slate-400">
            Crea, busca y filtra eventos del club.
          </p>
        </div>

        <button
          type="button"
          class="inline-flex items-center gap-2 rounded-xl px-4 py-2.5 text-sm font-semibold text-white bg-gradient-to-r from-pink-500 to-fuchsia-600 shadow-[0_10px_30px_-10px_rgba(236,72,153,0.6)] hover:from-pink-400 hover:to-fuchsia-500 transition focus:outline-none"
          aria-label="Crear evento"
        >
          <svg
            viewBox="0 0 24 24"
            class="h-5 w-5"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              d="M12 5v14M5 12h14"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
          Crear Evento
        </button>
      </div>

      <div class="w-full md:max-w-[500px] md:col-span-3 mt-4">
        <label class="sr-only" for="q">Buscar</label>
        <div class="relative">
          <input
            id="q"
            type="text"
            placeholder="Buscar por título, club o artista…"
            class="w-full rounded-xl border border-white/10 bg-white/5 text-slate-100 placeholder:text-slate-400 px-4 py-2.5 pr-12 outline-none focus:ring-2 focus:ring-pink-500/40"
          />
          <button
            type="button"
            class="absolute right-1.5 top-1.5 rounded-lg px-3 py-1.5 text-sm font-semibold text-slate-200 hover:bg-white/10 border border-white/10"
            aria-label="Buscar"
          >
            Buscar
          </button>
        </div>
      </div>

      <!-- Métricas rápidas -->
      <!-- <div class="mt-5 grid grid-cols-2 md:grid-cols-4 gap-3">
        <div class="rounded-xl border border-white/10 bg-white/5 p-3">
          <p class="text-xs text-slate-400">Publicados</p>
          <p class="text-lg font-bold text-slate-100">20</p>
        </div>
        <div class="rounded-xl border border-white/10 bg-white/5 p-3">
          <p class="text-xs text-slate-400">Programados</p>
          <p class="text-lg font-bold text-slate-100">30</p>
        </div>
        <div class="rounded-xl border border-white/10 bg-white/5 p-3">
          <p class="text-xs text-slate-400">Borradores</p>
          <p class="text-lg font-bold text-slate-100">40</p>
        </div>
        <div class="rounded-xl border border-white/10 bg-white/5 p-3">
          <p class="text-xs text-slate-400">Este mes</p>
          <p class="text-lg font-bold text-slate-100">50</p>
        </div>
      </div>
       -->

      <p class="text-sm text-slate-400 m-2">Categories</p>
      <div class="flex flex-wrap gap-2 gap-y-3">
        @for (item of service.listCategory(); track $index) {
        <button
          type="button"
          class="inline-flex items-center px-5 py-1.5 rounded-full border text-sm font-medium transition focus:outline-none select-none whitespace-nowrap"
          [ngClass]="
            service.selectedCategory() === item
              ? 'border-pink-500 text-white bg-pink-600/20'
              : 'border-gray-500 text-gray-300 hover:bg-gray-700/30'
          "
          (click)="selectCategory(item)"
        >
          {{ item.title }}
        </button>
        }
      </div>

      <div class="mt-4">
        <app-select-date
          [daySelected]="service.daySelected()"
          (daySelectedChange)="setDay($event)"
        />
      </div>
    </div>
  </article>
</section>

<section class="flex flex-col gap-4 mt-4">
  <!-- Grid -->
  <div class="grid gap-6 grid-cols-1 sm:grid-cols-2 xl:grid-cols-4">
    @for (item of listEvents; track $index) {
    <event-card
      [eventId]="item.eventId"
      [coverUrl]="item.imageUrl"
      [title]="item.title"
      [date]="item.eventDate"
      [category]="item.nameEventCategory"
      [venue]="item.nameClub"
      (toArtists)="toPath(item.eventId ?? item.eventId, 'artists')"
      (toSchedule)="toPath(item.eventId ?? item.eventId, 'schedule')"
      (toCategory)="toPath(item.eventId ?? item.eventId, 'categories')"
    />
    }
  </div>

  <!-- Loader / Estado -->
  @if (loading) {
  <div class="text-center text-sm opacity-70 py-3">Cargando más eventos…</div>
  } @if (endReached && listEvents.length > 0) {
  <div class="text-center text-xs opacity-60 py-3">No hay más eventos</div>
  } @if (!loading && listEvents.length === 0 && endReached) {
  <div class="text-center text-sm opacity-70 py-6">Sin resultados</div>
  }

  <!-- Sentinel: el observer mira este elemento para cargar más -->
  <div #infiniteScrollAnchor class="h-1"></div>
</section>
