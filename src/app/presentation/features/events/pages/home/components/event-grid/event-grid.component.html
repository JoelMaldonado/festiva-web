<section class="flex flex-col gap-4">
  <app-select-date
    [daySelected]="service.daySelected()"
    (daySelectedChange)="setDay($event)"
  />
  <div class="flex flex-wrap gap-2 gap-y-3">
    @for (item of service.listCategory(); track $index) {
    <button
      type="button"
      class="inline-flex items-center px-5 py-1.5 rounded-full border text-sm font-medium transition focus:outline-none select-none whitespace-nowrap"
      [ngClass]="
        service.selectedCategory() === item
          ? 'border-pink-500 text-white bg-pink-600/20'
          : 'border-gray-500 text-gray-300 hover:bg-gray-700/30'
      "
      (click)="service.selectedCategory.set(item)"
    >
      {{ item.title }}
    </button>
    }
  </div>

  <!-- Grid -->
  <div class="grid gap-6 grid-cols-1 sm:grid-cols-2 xl:grid-cols-4">
    @for (item of listEvents; track $index) {
    <event-card
      [eventId]="item.eventId"
      [coverUrl]="item.imageUrl"
      [title]="item.title"
      [date]="item.eventDate"
      [category]="item.nameEventCategory"
      [venue]="item.nameClub"
      (toArtists)="toPath(item.eventId ?? item.eventId, 'artists')"
      (toSchedule)="toPath(item.eventId ?? item.eventId, 'schedule')"
      (toCategory)="toPath(item.eventId ?? item.eventId, 'categories')"
    />
    }
  </div>

  <!-- Loader / Estado -->
  @if (loading) {
  <div class="text-center text-sm opacity-70 py-3">Cargando más eventos…</div>
  } @if (endReached && listEvents.length > 0) {
  <div class="text-center text-xs opacity-60 py-3">No hay más eventos</div>
  } @if (!loading && listEvents.length === 0 && endReached) {
  <div class="text-center text-sm opacity-70 py-6">Sin resultados</div>
  }

  <!-- Sentinel: el observer mira este elemento para cargar más -->
  <div #infiniteScrollAnchor class="h-1"></div>
</section>
