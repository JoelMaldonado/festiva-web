<p-drawer
  [header]="selectedEvent ? 'Editar Evento' : 'Crear Evento'"
  [(visible)]="showForm"
  position="right"
>
  <drawer-form-event (onSaved)="onSaved()" />
</p-drawer>

<div class="flex flex-col gap-4">
  <div class="flex justify-between items-center">
    <p-button label="Crear Evento" (onClick)="showForm = true" />
    <app-input
      label="Search"
      [model]="searchTerm"
      (modelChange)="onSearch($event)"
    />
  </div>

  <event-grid />

  <p-table
    #table
    [value]="listEvents"
    [loading]="isLoadingTable"
    [globalFilterFields]="['title']"
  >
    <ng-template pTemplate="header">
      <tr>
        <th>Title</th>
        <th>Fecha</th>
        <th>Hora</th>
        <th>Actions</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-event let-index="rowIndex">
      <tr>
        <td>{{ index + 1 }}. {{ event.title }}</td>
        <td>{{ event.eventDate | date : "dd/MM/yyyy" }}</td>
        <td>{{ event.startTime }}</td>
        <td>
          <p-button
            pTooltip="Artists"
            showDelay="100"
            hideDelay="100"
            icon="pi pi-users"
            [rounded]="true"
            [text]="true"
            (click)="toPath(event.id, 'artists')"
          />
          <p-button
            pTooltip="Schedule"
            showDelay="100"
            hideDelay="100"
            icon="pi pi-calendar"
            [rounded]="true"
            [text]="true"
            (click)="toPath(event.eventId, 'schedule')"
          />
          <p-button
            pTooltip="Categories"
            showDelay="100"
            hideDelay="100"
            icon="pi pi-tags"
            [rounded]="true"
            [text]="true"
            (click)="toPath(event.eventId, 'categories')"
          />
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
